<?php
require_once($_SERVER["DOCUMENT_ROOT"].'/endlessraider/back/class/Evenement.php');
require_once($_SERVER["DOCUMENT_ROOT"].'/endlessraider/back/class/StatutParticipant.php');
require_once($_SERVER["DOCUMENT_ROOT"].'/endlessraider/back/persistance/eventDao.php');


$json = '{"statut":{"code":"D","libelle":"Disponible"},"role":{"id":"4","libelle":"Support","nbrVoulu":"1"},"personnage":{"id":"3","nom":"Thorkh2","level":"23","genre":"M","race":{"id":"1","libelle":"Nain"},"classe":{"id":"1","libelle":"Mage"},"jeu":{"id":"3","nom":"GW2","type":{"id":"1","code":"MMORPG","libelle":"MMORPG (Massively Multiplayer Online Role Playing Game)"},"iconPath":"front/images/upload/5258a079817a50e58e928ef0a80bf9d6.png","listClasses":[{"id":"1","libelle":"Mage"}],"listRaces":[{"id":"1","libelle":"Nain"},{"id":"2","libelle":"Humain"}]}},"event":{"id":"7","nom":"TestEvent_GW2","desc":"","imagePath":null,"date":"19/06/2014","heure":"00:00","jeu":{"id":"3","nom":"GW2","type":{"id":"1","code":"MMORPG","libelle":"MMORPG (Massively Multiplayer Online Role Playing Game)"},"iconPath":"front/images/upload/5258a079817a50e58e928ef0a80bf9d6.png","listClasses":[{"id":"1","libelle":"Mage"}],"listRaces":[{"id":"1","libelle":"Nain"},{"id":"2","libelle":"Humain"}]},"nbrParticipantMax":"2","levelMin":null,"levelMax":null,"listParticipants":[{"personnage":{"id":"4","nom":"testPerso","level":null,"genre":"M","race":{"id":"1","libelle":"Nain"},"classe":{"id":"1","libelle":"Mage"},"jeu":{"id":"3","nom":"GW2","type":{"id":"1","code":"MMORPG","libelle":"MMORPG (Massively Multiplayer Online Role Playing Game)"},"iconPath":"front/images/upload/5258a079817a50e58e928ef0a80bf9d6.png","listClasses":[{"id":"1","libelle":"Mage"}],"listRaces":[{"id":"1","libelle":"Nain"},{"id":"2","libelle":"Humain"}]}},"user":{"id":"2","login":"Sieg","role":"editor","persos":[{"id":"4","nom":"testPerso","level":null,"genre":"M","race":{"id":"1","libelle":"Nain"},"classe":{"id":"1","libelle":"Mage"},"jeu":{"id":"3","nom":"GW2","type":{"id":"1","code":"MMORPG","libelle":"MMORPG (Massively Multiplayer Online Role Playing Game)"},"iconPath":"front/images/upload/5258a079817a50e58e928ef0a80bf9d6.png","listClasses":[{"id":"1","libelle":"Mage"}],"listRaces":[{"id":"1","libelle":"Nain"},{"id":"2","libelle":"Humain"}]}}]},"statut":{"code":"D","libelle":"Disponible"},"role":{"id":"4","libelle":"Support","nbrVoulu":"1"}},{"personnage":{"id":"5","nom":"Liath","level":null,"genre":"M","race":{"id":"1","libelle":"Nain"},"classe":{"id":"1","libelle":"Mage"},"jeu":{"id":"3","nom":"GW2","type":{"id":"1","code":"MMORPG","libelle":"MMORPG (Massively Multiplayer Online Role Playing Game)"},"iconPath":"front/images/upload/5258a079817a50e58e928ef0a80bf9d6.png","listClasses":[{"id":"1","libelle":"Mage"}],"listRaces":[{"id":"1","libelle":"Nain"},{"id":"2","libelle":"Humain"}]}},"user":{"id":"3","login":"Liath","role":"editor","persos":[{"id":"5","nom":"Liath","level":null,"genre":"M","race":{"id":"1","libelle":"Nain"},"classe":{"id":"1","libelle":"Mage"},"jeu":{"id":"3","nom":"GW2","type":{"id":"1","code":"MMORPG","libelle":"MMORPG (Massively Multiplayer Online Role Playing Game)"},"iconPath":"front/images/upload/5258a079817a50e58e928ef0a80bf9d6.png","listClasses":[{"id":"1","libelle":"Mage"}],"listRaces":[{"id":"1","libelle":"Nain"},{"id":"2","libelle":"Humain"}]}}]},"statut":{"code":"M","libelle":"En attente/Peut être"},"role":{"id":"4","libelle":"Support","nbrVoulu":"1"}},{"personnage":{"id":"6","nom":"Bryan","level":null,"genre":"M","race":{"id":"1","libelle":"Nain"},"classe":{"id":"1","libelle":"Mage"},"jeu":{"id":"3","nom":"GW2","type":{"id":"1","code":"MMORPG","libelle":"MMORPG (Massively Multiplayer Online Role Playing Game)"},"iconPath":"front/images/upload/5258a079817a50e58e928ef0a80bf9d6.png","listClasses":[{"id":"1","libelle":"Mage"}],"listRaces":[{"id":"1","libelle":"Nain"},{"id":"2","libelle":"Humain"}]}},"user":{"id":"4","login":"Bryan","role":"editor","persos":[{"id":"6","nom":"Bryan","level":null,"genre":"M","race":{"id":"1","libelle":"Nain"},"classe":{"id":"1","libelle":"Mage"},"jeu":{"id":"3","nom":"GW2","type":{"id":"1","code":"MMORPG","libelle":"MMORPG (Massively Multiplayer Online Role Playing Game)"},"iconPath":"front/images/upload/5258a079817a50e58e928ef0a80bf9d6.png","listClasses":[{"id":"1","libelle":"Mage"}],"listRaces":[{"id":"1","libelle":"Nain"},{"id":"2","libelle":"Humain"}]}}]},"statut":{"code":"I","libelle":"Non disponible"},"role":{"id":"5","libelle":"Tank","nbrVoulu":"3"}}],"listRoles":[{"id":"4","libelle":"Support","nbrVoulu":"1"},{"id":"5","libelle":"Tank","nbrVoulu":"3"}]}}';
$inscriptionParticipant = json_decode($json);

$event = getEventById($inscriptionParticipant->event->id);

echo ($inscriptionParticipant->statut->code == CODE_STATUT_DISPO);

echo json_encode($inscriptionParticipant->role);

if($inscriptionParticipant->statut->code == CODE_STATUT_DISPO
	&& isset($inscriptionParticipant->role) && $event->isRolePein($inscriptionParticipant->role) ) {
	echo "role plein";
}

?>